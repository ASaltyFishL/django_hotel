# 酒店系统接口测试方案

## 1. 测试目标

本方案旨在通过接口测试，验证酒店管理系统各API接口的功能正确性、性能稳定性和安全性，确保系统能够满足业务需求。

## 2. 测试范围

测试覆盖系统所有主要功能模块的API接口：

- 员工管理接口
- 顾客管理接口
- 客房管理接口
- 餐厅管理接口
- 会员管理接口
- 停车场管理接口
- 订单管理接口
- 住宿管理接口
- 系统登录接口

## 3. 测试环境

- 测试工具：Apifox/Postman
- 测试服务器：http://127.0.0.1:8000
- 数据库：MySQL

## 4. 接口测试用例

### 4.1 登录接口

#### 4.1.1 登录成功
- **请求URL**：/login/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "username": "admin",
    "password": "admin"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：重定向到首页

#### 4.1.2 登录失败（用户名错误）
- **请求URL**：/login/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "username": "invalid_user",
    "password": "admin"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：提示用户名或密码错误

#### 4.1.3 登录失败（密码错误）
- **请求URL**：/login/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "username": "admin",
    "password": "invalid_password"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：提示用户名或密码错误

### 4.2 员工管理接口

#### 4.2.1 添加员工
- **请求URL**：/insert/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "1001",
    "name": "张三",
    "job": "服务员",
    "salary": "3000",
    "time_work": "1"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回员工管理页面，显示新添加的员工信息

#### 4.2.2 查询员工
- **请求URL**：/search_staff/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "姓名",
    "value": "张三"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含张三信息的员工列表

#### 4.2.3 修改员工
- **请求URL**：/update_staff/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "1001",
    "job": "主管",
    "salary": "5000",
    "time": "2"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回员工管理页面，显示更新后的员工信息

#### 4.2.4 删除员工
- **请求URL**：/delete_staff/
- **请求方法**：GET
- **请求参数**：`id=1001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回员工管理页面，不再显示被删除的员工信息

### 4.3 顾客管理接口

#### 4.3.1 添加顾客
- **请求URL**：/insert_client/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "2001",
    "name": "李四",
    "identify": "110101199001011234"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回顾客管理页面，显示新添加的顾客信息

#### 4.3.2 查询顾客
- **请求URL**：/search_client/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "姓名",
    "value": "李四"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含李四信息的顾客列表

#### 4.3.3 修改顾客
- **请求URL**：/update_client/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "2001",
    "name": "李四改",
    "identify": "110101199001011234"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回顾客管理页面，显示更新后的顾客信息

#### 4.3.4 删除顾客
- **请求URL**：/delete_client/
- **请求方法**：GET
- **请求参数**：`id=2001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回顾客管理页面，不再显示被删除的顾客信息

### 4.4 客房管理接口

#### 4.4.1 添加客房
- **请求URL**：/insert_room/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "301",
    "type": "标准间",
    "price": "200",
    "waiter": "1"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回客房管理页面，显示新添加的客房信息

#### 4.4.2 查询客房
- **请求URL**：/search_room/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "房间号",
    "value": "301"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含301房间信息的客房列表

#### 4.4.3 修改客房
- **请求URL**：/update_room/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "301",
    "type": "豪华间",
    "price": "350",
    "waiter": "1"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回客房管理页面，显示更新后的客房信息

#### 4.4.4 删除客房
- **请求URL**：/delete_room/
- **请求方法**：GET
- **请求参数**：`id=301`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回客房管理页面，不再显示被删除的客房信息

### 4.5 餐厅管理接口

#### 4.5.1 添加菜品
- **请求URL**：/insert_food/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "4001",
    "name": "宫保鸡丁",
    "price": "48",
    "cooker": "2"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回餐厅管理页面，显示新添加的菜品信息

#### 4.5.2 查询菜品
- **请求URL**：/search_food/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "菜名",
    "value": "宫保鸡丁"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含宫保鸡丁信息的菜品列表

#### 4.5.3 修改菜品
- **请求URL**：/update_food/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "4001",
    "price": "58",
    "cooker": "2"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回餐厅管理页面，显示更新后的菜品信息

#### 4.5.4 删除菜品
- **请求URL**：/delete_food/
- **请求方法**：GET
- **请求参数**：`id=4001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回餐厅管理页面，不再显示被删除的菜品信息

### 4.6 会员管理接口

#### 4.6.1 添加会员
- **请求URL**：/insert_vip/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "5001",
    "name": "王五",
    "rank": "金卡会员",
    "tel": "13800138001"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回会员管理页面，显示新添加的会员信息

#### 4.6.2 查询会员
- **请求URL**：/search_vip/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "姓名",
    "value": "王五"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含王五信息的会员列表

#### 4.6.3 修改会员
- **请求URL**：/update_vip/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "5001",
    "rank": "白金会员",
    "tel": "13800138002"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回会员管理页面，显示更新后的会员信息

#### 4.6.4 删除会员
- **请求URL**：/delete_vip/
- **请求方法**：GET
- **请求参数**：`id=5001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回会员管理页面，不再显示被删除的会员信息

### 4.7 停车场管理接口

#### 4.7.1 添加停车位
- **请求URL**：/insert_park/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "6001",
    "status": "已占用",
    "num": "京A12345"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回停车场管理页面，显示新添加的停车位信息

#### 4.7.2 查询停车位
- **请求URL**：/search_park/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "columns": "车位编号",
    "value": "6001"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回包含6001车位信息的列表

#### 4.7.3 修改停车位
- **请求URL**：/update_park/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "6001",
    "status": "空闲",
    "num": ""
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回停车场管理页面，显示更新后的停车位信息

#### 4.7.4 删除停车位
- **请求URL**：/delete_park/
- **请求方法**：GET
- **请求参数**：`id=6001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回停车场管理页面，不再显示被删除的停车位信息

### 4.8 订单管理接口

#### 4.8.1 创建餐厅订单
- **请求URL**：/insert_order/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "7001",
    "client": "2001",
    "food": "4001",
    "waiter": "1",
    "table": "10"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回订单管理页面，显示新创建的订单信息

#### 4.8.2 查询餐厅订单
- **请求URL**：/search_order/
- **请求方法**：POST
- **请求参数**：`id=2001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回该顾客的所有餐厅订单信息

#### 4.8.3 删除餐厅订单
- **请求URL**：/delete_order/
- **请求方法**：GET
- **请求参数**：`id=7001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回订单管理页面，不再显示被删除的订单信息

### 4.9 住宿管理接口

#### 4.9.1 创建客房订单
- **请求URL**：/insert_accomodation/
- **请求方法**：POST
- **请求参数**：
  ```json
  {
    "id": "8001",
    "client": "2001",
    "room": "301",
    "time": "2023-05-01"
  }
  ```
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回住宿管理页面，显示新创建的订单信息

#### 4.9.2 查询客房订单
- **请求URL**：/search_accomodation/
- **请求方法**：POST
- **请求参数**：`id=2001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回该顾客的所有客房订单信息

#### 4.9.3 删除客房订单
- **请求URL**：/delete_accomodation/
- **请求方法**：GET
- **请求参数**：`id=8001`
- **预期响应**：
  - 状态码：200 OK
  - 响应体：返回住宿管理页面，不再显示被删除的订单信息

## 5. 测试执行流程

1. **准备阶段**
   - 安装Apifox/Postman
   - 导入测试用例
   - 准备测试数据

2. **执行阶段**
   - 按照功能模块顺序执行测试用例
   - 记录测试结果
   - 发现并记录缺陷

3. **报告阶段**
   - 生成测试报告
   - 分析测试结果
   - 提出改进建议

## 6. 测试报告

测试报告应包含以下内容：

- 测试概述
- 测试环境
- 测试执行情况统计
- 缺陷统计与分析
- 测试结论与建议

## 7. 注意事项

1. 确保测试环境的稳定性
2. 测试数据应具有代表性，覆盖各种情况
3. 执行测试前，确保系统处于正常运行状态
4. 测试过程中，注意保存测试数据和截图等证据
5. 及时更新测试用例，以适应系统的变更

## 8. 附录

### 8.1 接口测试模板

使用Apifox/Postman创建测试用例时，可以按照以下模板填写：

- **测试用例名称**：[功能模块]-[测试点]
- **请求URL**：接口地址
- **请求方法**：GET/POST等
- **请求头**：根据需要设置
- **请求参数**：根据接口要求填写
- **预期响应**：设置响应状态码、响应体等验证条件
- **实际响应**：执行测试后自动记录
- **测试结果**：通过/失败

### 8.2 常见问题解决

- **接口返回404**：检查URL是否正确
- **接口返回403**：检查是否需要登录或权限
- **接口返回500**：服务器内部错误，需要查看日志
- **参数验证失败**：检查参数格式和必填项